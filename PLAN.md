# SmokeScreen 開発計画

## 概要
ユーザーからのフィードバックに基づき、以下の機能改善とバグ修正を行う。

---

## 1. バグ修正 (最優先)
-   **内容:** 形状の切り抜き（クリッピング）が正しく機能しない問題を修正する。
-   **原因:** 色が適用されている `Window` ではなく、背景が透明な `MainGrid` に対してクリッピングを行っているため。
-   **修正方針:** `Window` の背景色を持つ要素に対して、正しくクリッピングを適用するようにロジックを修正する。

## 2. アーキテクチャ変更
-   **内容:** マルチパッチ管理機能とモード切替を実装する。
-   **詳細:**
    -   **マルチパッチ管理:** 単一のアプリケーションインスタンス内で、複数の独立したパッチを管理できるようにする。タスクトレイメニューから「パッチの追加/削除」が可能。
    -   **直感的な操作:** `SmokeScreen.exe` を直接実行すると、既にアプリが起動している場合は「新しいパッチの追加」命令として機能させる（プロセス間通信を利用）。
    -   **モード切替:**
        -   **通常モード:** マウス操作を完全に透過させる (`IsHitTestVisible = False`)。
        -   **設定モード:** ウィンドウの移動や編集が可能なモード。ホットキーやタスクトレイメニューで切り替える。

## 3. 機能改善・UI/UX向上
-   **形状ツール:** 編集モードに「四角形」「楕円」といった定義済み図形を追加する。
-   **カラーピッカー:** 現在のスライダー形式から、より直感的なカラーピッカーコントロールに変更する。
-   **設定ウィンドウ:** 設定ウィンドウ自体に透明度スライダーを追加し、オーバーレイとして利用しやすくする。
-   **グローバルホットキー:** アプリケーション全体の表示/非表示を切り替えるショートカットキーを実装する。将来的にはキー割り当ても設定可能にする。
